<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pyodide Flamapy</title>
    <script src="https://cdn.jsdelivr.net/pyodide/v0.23.3/full/pyodide.js"></script>
    <script src="./ui.js"></script>
    <script src="./flamapy.js"></script>
</head>
<body>
    <h1>Pyodide + Flamapy Runner</h1>
    
    <textarea id="uvlfile" style="width: 100%;" rows="20">
features
    eCommerce { abstract }
        mandatory
            Server { abstract }
                mandatory
                    PHP
                        mandatory
                            v74
                    Storage
                        alternative
                            LOW
                            ENOUGH
            Web { abstract }
                mandatory
                    Catalog
                    Search
                        alternative
                            BASIC
                            ADVANCED
                    Shopping 
                        mandatory
                            Cart
                            Payment
                                or
                                    PayPal
                                    CreditCard
                                    Mobile
                    Security
                        alternative
                            HIGH
                            STANDARD
                optional
                    Backup
                    Marketing
                        optional
                            SEO
                            Socials
                                or
                                    Twitter
                                    Facebook
                                    YouTube
constraints
    CreditCard => HIGH
    Mobile => HIGH
    LOW => !Backup</textarea>
        
        <div>
            <button class="operation btn btn-light mr-2 mb-2" onclick="runFlamapyMethod('configurations')" disabled="">Get configurations</button>
            <button class="operation btn btn-light mr-2 mb-2" onclick="runFlamapyMethod('satisfiable')" disabled="">Is satisfiable?</button>
            <button class="operation btn btn-light mr-2 mb-2" onclick="runFlamapyMethod('configurations_number')" disabled="">How many products there are?</button>
            <button class="operation btn btn-light mr-2 mb-2" onclick="runFlamapyMethod('atomic_sets')" disabled="">atomic_sets</button>
            <button class="operation btn btn-light mr-2 mb-2" onclick="runFlamapyMethod('average_branching_factor')" disabled="">average_branching_factor</button>
            <button class="operation btn btn-light mr-2 mb-2" onclick="runFlamapyMethod('count_leafs')" disabled="">count_leafs</button>
            <button class="operation btn btn-light mr-2 mb-2" onclick="runFlamapyMethod('estimated_number_of_configurations')" disabled="">estimated_number_of_configurations</button>
            <button class="operation btn btn-light mr-2 mb-2" onclick="runFlamapyMethod('leaf_features')" disabled="">leaf_features</button>
            <button class="operation btn btn-light mr-2 mb-2" onclick="runFlamapyMethod('max_depth')" disabled="">max_depth</button>
            <button class="operation btn btn-light mr-2 mb-2" onclick="runFlamapyMethod('core_features')" disabled="">core_features</button>
            <button class="operation btn btn-light mr-2 mb-2" onclick="runFlamapyMethod('dead_features')" disabled="">dead_features</button>
            <button class="operation btn btn-light mr-2 mb-2" onclick="runFlamapyMethod('false_optional_features')" disabled="">false_optional_features</button>
        </div>
        
        <div>
            <h2>The output is:</h2>
            <div id="loading" style="display:none;"><img src="loading.gif" width="100px" /> Loading, more details in the javascript console </div> 
            <div id="result"><div id="loading" style="display:none;"></div></div>
        </div>
        
        </div>
        <script>
            document.addEventListener('DOMContentLoaded', (event) => {
                prepareWASM()
            });
        </script>


</body>
</html>
